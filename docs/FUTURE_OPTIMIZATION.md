# AI Fridge Elf - 下次優化計畫

## 🔥 待實作功能（2026-02-04 討論）

### 1️⃣ 篩選器優化
**目的：** 讓用戶可以單獨查看丟棄的食材

**變更內容：**
```
全部食材
冷藏
冷凍
已過期
📦 已處理（全部歷史）
🗑️ 已丟棄（浪費紀錄）   ← 新增
```

**時間篩選（預設近 3 個月）：**
- 本月
- 近 3 個月
- 近 1 年
- 全部

---

### 2️⃣ 月度報告 LINE 推播
**目的：** 每月月底推送食材利用率報告

**計算邏輯：**
- 節省金額 = 本月「已用完」食材的總價值
- 浪費金額 = 本月「已丟棄」食材的總價值

**LINE 訊息範例：**
```
🎉 2 月份冰箱報告

✅ 成功吃完：5 項，價值 $850
🗑️ 可惜丟棄：2 項，價值 $150

💰 食材利用率：85%
📈 比上月進步 10%！

👉 點我查看詳細報告
```

**備註：** 沒有價格的食材顯示「X 項（未標價）」

---

### 3️⃣ 冰箱選擇器問題
**問題：** 新增食材時顯示多個冰箱（冰箱1、7、8、9）
**預期：** 1 個用戶應該只對應 1 個冰箱

**待確認：** 是否要清理重複的冰箱資料

---

## 後台管理功能

### 4️⃣ 問題回報功能（建議優先）
**目的：** 讓用戶在 LINE 內直接回報問題

**實作方式：**
- LIFF 內新增「回報問題」頁面
- 表單欄位：問題類型（下拉選單）、描述、截圖（可選）
- 儲存到資料庫 `issue_reports` 表

**開發時間：** 約 1-2 小時

---

### 5️⃣ 管理員統計頁面
**目的：** 在手機上快速查看系統狀態

**功能：**
- 用戶統計（總數、本週新增、活躍用戶數）
- 食材統計（總數、最常新增的食材類別）
- 問題回報列表（未處理 / 已處理）

**實作方式：**
- LIFF 內新增「管理員」頁面（需驗證身份）
- 後端新增統計 API

**開發時間：** 約 2-3 小時

---

### 6️⃣ 用戶查詢功能
**目的：** Debug 時快速查看特定用戶資料

**功能：**
- 輸入用戶名稱搜尋
- 顯示該用戶的冰箱、食材清單、操作紀錄

**實作方式：**
- 管理員頁面內的查詢功能
- 後端 `/admin/user/search` API

**開發時間：** 約 1-2 小時

---

## 內容推播管理

### 7️⃣ 排程推播功能
**目的：** 定時推送食譜推薦、食材靈感等內容

**功能：**
- 建立推播內容（Flex Message 模板）
- 設定推播時間
- 查看推播歷史和送達率

**實作方式：**
- 新增 `scheduled_messages` 資料表
- 擴展現有 scheduler.py
- LIFF 內的排程管理介面

**開發時間：** 約 3-4 小時

---

## 優先順序建議

| 順序 | 功能 | 原因 |
|-----|------|------|
| 1 | 篩選器優化 | 已討論確認，可快速實作 |
| 2 | 月度報告推播 | 用戶體驗提升 |
| 3 | 問題回報 | 用戶遇到問題有管道反映 |
| 4 | 管理員統計頁 | 快速了解系統狀態 |
| 5 | 用戶查詢 | Debug 必備 |
| 6 | 排程推播 | 內容營運需要 |

---

*最後更新：2026-02-04*

